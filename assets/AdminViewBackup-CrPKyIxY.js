import{a as y,c as d,n as z,j as o,g as u,_ as b,F as R,e as L,h as _,y as r,t as P,w as m,C as S,r as k,k as U,p as x,v as A,D as I,x as V,o as D,b as C,M as f}from"./index-Cl8wapc-.js";import{h as $,A as B}from"./api-BnkjjIlq.js";import{L as M}from"./ListButton-BatumWRR.js";const T=y({__name:"IconRestore",props:{size:{}},setup(v){return(i,l)=>(u(),d("svg",{class:"restore-icon",style:z(`width:${i.size}px; height:${i.size}px;`),"shape-rendering":"geometricPrecision","text-rendering":"geometricPrecision","image-rendering":"optimizeQuality","fill-rule":"evenodd","clip-rule":"evenodd",viewBox:"0 0 490 512.34"},l[0]||(l[0]=[o("path",{"fill-rule":"nonzero",d:"M109.79 58.85c38.55-24.61 82.86-37.93 127.61-38.97 48.03-1.12 96.61 11.93 139.16 40.34 15.05 10.05 28.64 21.2 40.7 33.21 41.85 41.65 66.03 93.93 71.53 148.22 5.49 54.16-7.72 110.17-40.59 159.41-9.47 14.18-20.54 27.76-33.22 40.5-29.86 30.01-66.53 51.27-106.54 62.25-39.26 10.76-81.54 11.59-123.52 1.04-13.74-3.45-27.53-8.07-41.17-13.85-13.5-5.72-26.2-12.28-37.84-19.68-15.81-10.02-20.5-30.98-10.47-46.78s30.98-20.49 46.78-10.47c9.19 5.84 18.5 10.72 27.77 14.65 9.81 4.16 20.33 7.63 31.36 10.4 30.67 7.71 61.23 7.18 89.33-.52 28.52-7.82 54.8-23.1 76.33-44.74 9.62-9.68 17.96-19.88 25-30.43 23.83-35.68 33.42-76.14 29.46-115.16-3.95-38.9-21.49-76.59-51.91-106.86-9.09-9.05-19.32-17.44-30.63-25-30.55-20.39-65.53-29.76-100.2-28.95-35.07.82-69.85 12.1-99.43 32.96l22.38 7.41c18.45 6.07 28.49 25.96 22.41 44.41-6.07 18.45-25.96 28.49-44.41 22.41l-95.85-31.72c-18.39-6.05-28.41-25.84-22.46-44.24l24.38-92.5C50.68 7.44 69.9-3.77 88.66 1.16c18.75 4.93 29.96 24.15 25.02 42.91l-3.89 14.78zM82.41 347.31c7.97 16.91.74 37.09-16.17 45.06-16.9 7.97-37.08.73-45.05-16.17-2.49-5.28-4.9-11.05-7.22-17.28-2.25-6.05-4.2-12.01-5.83-17.87a222.07 222.07 0 0 1-6.12-29.72C.69 301.57.01 291.43 0 281c0-18.66 15.13-33.79 33.79-33.79 18.66 0 33.79 15.13 33.79 33.79 0 6.98.51 14.12 1.49 21.31.95 7 2.39 13.93 4.28 20.71 1.21 4.35 2.53 8.46 3.96 12.31 1.37 3.69 3.08 7.7 5.1 11.98z"},null,-1)]),4))}}),F=b(T,[["__scopeId","data-v-dd6d6afb"]]),N={class:"backup-record"},E=y({__name:"AdminBackupList",props:{backups:{}},emits:["backupClick"],setup(v,{emit:i}){const l=i;return(a,n)=>(u(!0),d(R,null,L(a.backups,c=>(u(),d("div",{key:c.id},[o("div",N,[_(P(c.file_name)+" ",1),r(M,{onClick:g=>l("backupClick","restore",c.id)},{default:m(()=>[r(F,{size:15})]),_:2},1032,["onClick"])])]))),128))}}),j=b(E,[["__scopeId","data-v-80d28c10"]]),G={class:"form-container"},K={class:"form-field"},O={class:"form-field"},Q={class:"form-actions"},q=["disabled"],H=y({__name:"AdminSettings",props:{settings:{}},emits:["change-data"],setup(v,{emit:i}){const a=S({...v.settings}),n=k({}),c=U(()=>Object.values(n.value).some(e=>e)),g=i,p=e=>{n.value[e]=!0},w=async()=>{try{const e=new FormData;for(const s in n.value)if(n.value[s]&&s in a){const h=s;e.append(s,String(a[h]))}const{data:t}=await $.post(B.admin_settings,e,{headers:{"Content-Type":"multipart/form-data"}});console.log("Данные успешно сохранены:",t),n.value={},g("change-data")}catch(e){console.error("Ошибка при сохранении:",e)}};return(e,t)=>(u(),d("div",G,[o("form",{onSubmit:V(w,["prevent"]),class:"edit-form"},[o("div",K,[t[4]||(t[4]=o("label",null,"Playlist URL",-1)),x(o("input",{type:"text",id:"playlist_url","onUpdate:modelValue":t[0]||(t[0]=s=>a.playlist_url=s),onInput:t[1]||(t[1]=s=>p("playlist_url")),class:I({changed:n.value.playlist_url})},null,34),[[A,a.playlist_url]])]),o("div",O,[t[5]||(t[5]=o("label",null,"EPG URL",-1)),x(o("input",{type:"text",id:"epg_url","onUpdate:modelValue":t[2]||(t[2]=s=>a.epg_url=s),onInput:t[3]||(t[3]=s=>p("epg_url")),class:I({changed:n.value.epg_url})},null,34),[[A,a.epg_url]])]),o("div",Q,[o("button",{type:"submit",disabled:!c.value},"Change",8,q)])],32)]))}}),J=b(H,[["__scopeId","data-v-1a52b717"]]),W={class:"admin-backup-menu"},X={key:0},Y={key:0},Z={key:1},tt={key:0},et={class:"manage-buttons"},st=y({__name:"AdminBackup",setup(v){const i=k(),l=k(),a=k(!1),n=k(!1);async function c(){const{data:e}=await $.get(B.admin_page_backup_list);console.log(e),i.value=e}async function g(){const{data:e}=await $.get(B.admin_settings);console.log(e),l.value=e}async function p(e,t){const{data:s}=await $.get(B.admin_page_action(e,t));console.log(s)}D(()=>{c(),g()});function w(){n.value=!n.value,g()}return(e,t)=>(u(),d("div",W,[r(f,{onClick:t[0]||(t[0]=s=>p("backup",""))},{default:m(()=>t[5]||(t[5]=[_("BackUp",-1)])),_:1,__:[5]}),r(f,{onClick:t[1]||(t[1]=()=>{a.value=!a.value})},{default:m(()=>t[6]||(t[6]=[_("Restore",-1)])),_:1,__:[6]}),a.value?(u(),d("div",X,[i.value?(u(),d("div",Y,[r(j,{backups:i.value,onBackupClick:p},null,8,["backups"])])):C("",!0)])):C("",!0),r(f,{onClick:t[2]||(t[2]=()=>{n.value=!n.value})},{default:m(()=>t[7]||(t[7]=[_("IPTV",-1)])),_:1,__:[7]}),n.value?(u(),d("div",Z,[l.value?(u(),d("div",tt,[r(J,{settings:l.value,onChangeData:w},null,8,["settings"]),o("div",et,[r(f,{onClick:t[3]||(t[3]=s=>p("playlist-update",""))},{default:m(()=>t[8]||(t[8]=[_("Playlist Update",-1)])),_:1,__:[8]}),r(f,{onClick:t[4]||(t[4]=s=>p("epg_update",""))},{default:m(()=>t[9]||(t[9]=[_("EPG Update",-1)])),_:1,__:[9]})])])):C("",!0)])):C("",!0)]))}}),nt=b(st,[["__scopeId","data-v-7da60057"]]),at={class:"admin-view-backup"},ot=y({__name:"AdminViewBackup",setup(v){return(i,l)=>(u(),d("div",at,[r(nt)]))}}),dt=b(ot,[["__scopeId","data-v-a0b9bc4e"]]);export{dt as default};
