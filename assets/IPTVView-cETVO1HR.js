import{h as w,A as y}from"./api-DUXCY34Q.js";import{a as k,c as i,j as d,h as E,t as h,g as o,_ as N,d as H,r as g,n as A,B as F,y as C,w as $,D as R,o as U,E as G,m as B,f as D,b as _,F as L,e as I,u as f,M as j}from"./index-C41ojl20.js";import{L as q}from"./ListButton-uHzKahKN.js";import{I as J}from"./IconBackArrow-Bs36Jw_s.js";const K={class:"channel-list"},O=["src"],Q=k({__name:"ChannelList",props:{channelNumber:{},channelImg:{},tvgID:{},channelName:{},channel_url:{}},emits:["clickChannel"],setup(r,{emit:s}){const n=s;return(e,a)=>(o(),i("div",K,[d("div",{class:"channel-name",onClick:a[0]||(a[0]=p=>n("clickChannel",e.channel_url))},[E(h(e.channelNumber)+" ",1),d("img",{class:"channel-logo",src:e.channelImg,alt:"Channel Icon"},null,8,O),E(" "+h(e.channelName),1)])]))}}),W=N(Q,[["__scopeId","data-v-1ffd0fa9"]]),X=H("iptvChannels",()=>{const r=g();async function s(n){const{data:e}=await w.get(y.iptv_channels(n));r.value=e}return{channels:r,fetchChannels:s}}),Y=H("epgNow",()=>{const r=g();async function s(n){const{data:e}=await w.get(y.iptv_epg_now(n));r.value=e}return{epgNow:r,fetchEpgNow:s}}),Z=H("epgChannel",()=>{const r=g();async function s(n){const{data:e}=await w.get(y.iptv_epg_channel(n));r.value=e}return{epgChannel:r,fetchEpgChannel:s}}),ee=k({__name:"IconList",props:{size:{}},setup(r){return(s,n)=>(o(),i("svg",{x:"0px",y:"0px",viewBox:"0 0 122.88 96.91",style:A(`width:${s.size}px; height:${s.size}px;`),"xml:space":"preserve"},n[0]||(n[0]=[d("g",null,[d("path",{class:"st0",d:"M122.88,0v20.05H33.2V0H122.88L122.88,0z M21.13,76.86v20.05H0V76.86H21.13L21.13,76.86z M21.13,38.43v20.05H0 V38.43H21.13L21.13,38.43z M21.13,0v20.05H0V0H21.13L21.13,0z M122.88,76.86v20.05H33.2V76.86H122.88L122.88,76.86z M122.88,38.43 v20.05H33.2V38.43H122.88L122.88,38.43z"})],-1)]),4))}}),ne=N(ee,[["__scopeId","data-v-a6e990d7"]]),te={class:"channel-epg"},ae=k({__name:"EpgNowList",props:{channel_id:{}},emits:["clickEpgButton"],setup(r,{emit:s}){const n=s;return(e,a)=>(o(),i("div",te,[F(e.$slots,"default",{},void 0),d("div",null,[C(q,{onClick:a[0]||(a[0]=p=>n("clickEpgButton",e.channel_id))},{default:$(()=>[C(ne,{size:20})]),_:1})])]))}}),se=N(ae,[["__scopeId","data-v-1da76f82"]]),le={class:"epg-date"},oe={class:"epg-channel-title"},ce=k({__name:"EpgChannel",props:{start:{},end:{},title:{},epg_url:{}},emits:["clickEpgHistory"],setup(r,{emit:s}){const n=s,e=()=>{const t=new Date,u=new Date(r.start),v=new Date(r.end);return t>v?"past":t>=u&&t<=v?"current":"future"};function a(t){return new Date(t).toLocaleString("ru-RU",{month:"2-digit",day:"2-digit",weekday:"short"})}function p(t){return new Date(t).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit",hour12:!1})}return(t,u)=>(o(),i("div",{class:R(["epg-channel",e()]),onClick:u[0]||(u[0]=v=>n("clickEpgHistory",t.epg_url)),ref:"programStatus"},[d("div",le,h(a(t.start))+" "+h(p(t.start)),1),d("div",oe,h(t.title),1)],2))}}),re=N(ce,[["__scopeId","data-v-222859e3"]]),ie={key:1,class:"playlist-group"},ue={key:2,class:"playlist-channels"},pe={key:0},ge={key:3},he=k({__name:"IPTVView",setup(r){const s=g(),n=g(!0),e=g(!1),a=g(!1),p=X(),t=Y(),u=Z(),v=g(null);async function T(){const{data:l}=await w.get(y.iptv_group);console.log(l),s.value=l}U(()=>{T(),a.value&&S()});function b(l){n.value=!n.value,e.value=!e.value,p.channels=[],t.epgNow=[],u.epgChannel=[],p.fetchChannels(l),t.fetchEpgNow(l)}function M(l){console.log(l),a.value=!a.value,e.value=!e.value,u.fetchEpgChannel(l)}function P(){console.log("arrow"),a.value?(a.value=!a.value,e.value=!0,u.epgChannel=[]):e.value&&(e.value=!e.value,n.value=!n.value,p.channels=[],t.epgNow=[])}async function x(l){const{data:z}=await w.post(y.iptv_play,{url:l});console.log(z)}function V(l){console.log(l),x(l)}const S=async()=>{await G(),setTimeout(()=>{const l=v.value?.querySelector(".epg-channel.current");l&&l.scrollIntoView({behavior:"smooth",block:"center"})},100)};return B(()=>u.epgChannel,()=>{a.value&&S()}),B(()=>t.epgNow,()=>{console.log(t.epgNow)}),(l,z)=>(o(),i(L,null,[n.value?_("",!0):(o(),D(J,{key:0,size:70,onClick:P})),n.value&&!e.value&&!a.value?(o(),i("div",ie,[(o(!0),i(L,null,I(s.value,(c,m)=>(o(),D(j,{key:m,onClick:de=>b(c)},{default:$(()=>[E(h(c),1)]),_:2},1032,["onClick"]))),128))])):_("",!0),e.value&&!n.value&&!a.value?(o(),i("div",ue,[(o(!0),i(L,null,I(f(p).channels,(c,m)=>(o(),i("div",{key:c.id},[C(W,{channel_url:c.url,"channel-number":m+1,"channel-img":c.tvg_logo,tvgID:c.tvg_id,"channel-name":c.channel_name,onClickChannel:V},null,8,["channel_url","channel-number","channel-img","tvgID","channel-name"]),f(t).epgNow&&f(t).epgNow[c.id]?(o(),i("div",pe,[C(se,{channel_id:c.tvg_id,onClickEpgButton:M},{default:$(()=>[E(h(f(t).epgNow[c.id]),1)]),_:2},1032,["channel_id"])])):_("",!0)]))),128))])):_("",!0),a.value&&!n.value&&!e.value?(o(),i("div",ge,[f(u).epgChannel?(o(),i("div",{key:0,class:"epg-list-container",ref_key:"epgListContainer",ref:v},[(o(!0),i(L,null,I(f(u).epgChannel,(c,m)=>(o(),i("div",{key:m},[C(re,{epg_url:c.url,start:c.start,end:c.end,title:c.title,onClickEpgHistory:V},null,8,["epg_url","start","end","title"])]))),128))],512)):_("",!0)])):_("",!0)],64))}}),Ce=N(he,[["__scopeId","data-v-5ca875b2"]]);export{Ce as default};
